{"version":3,"sources":["ArgyleEngine.ts"],"names":[],"mappings":"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","file":"ArgyleEngine.js","sourcesContent":["\r\n\r\nvar $: any;\r\n// Given integers low and high, returns a random integer in the interval [low, high]\r\nfunction randIntBetween(low: number, high: number): number {\r\n    return Math.floor(Math.random() * (high - low + 1) + low);\r\n}\r\n\r\n// Prevent a number from going outside specified range\r\nfunction clamp(low: number, high: number, num: number) {\r\n\treturn (num < low) ? low : (num > high) ? high : num;\r\n}\r\n\r\nfunction collide(obj: Vector2, NPCs: Array<Obj>): boolean {\r\n    for (var ind: number = 0; ind < NPCs.length; ind++) {\r\n        if (obj.equals(NPCs[ind].gPos))\r\n            return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nclass Vector2 {\r\n    x: number;\r\n    y: number;\r\n    constructor(x: number, y: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    static randVector2(xMax: number, yMax: number) {\r\n        return new Vector2(randIntBetween(0, xMax), randIntBetween(0, yMax));\r\n    }\r\n    public abs(): Vector2 {\r\n        return new Vector2(Math.abs(this.x), Math.abs(this.y));\r\n    }\r\n    plus(rhs: Vector2): Vector2 {\r\n        return new Vector2(this.x + rhs.x, this.y + rhs.y);\r\n    }\r\n    minus(rhs: Vector2): Vector2 {\r\n        return new Vector2(this.x - rhs.x, this.y - rhs.y);\r\n    }\r\n    equals(rhs: Vector2): boolean {\r\n        return (this.x == rhs.x) && (this.y == rhs.y);\r\n    }\r\n}\r\n\r\nclass Input {\r\n    private mouseDown: boolean;\r\n    public mouseClicked: boolean;\r\n    public mouseDownPos: Vector2;\r\n    public mouseUpPos: Vector2;\r\n    public keyPresses: Array<string>;\r\n\r\n    constructor() {\r\n        this.mouseDown = false;\r\n        this.mouseClicked = false;\r\n        this.mouseDownPos = new Vector2(-1, -1);\r\n        this.mouseUpPos = new Vector2(-1, -1);\r\n        this.keyPresses = new Array(\"\");\r\n    }\r\n    public mousedown(e: any) {\r\n        this.mouseDownPos.x = e.pageX;\r\n        this.mouseDownPos.y = e.pageY;\r\n        this.mouseDown = true;\r\n    }\r\n    public mouseup(e: any) {\r\n        this.mouseUpPos.x = e.pageX;\r\n        this.mouseUpPos.y = e.pageY;\r\n        this.mouseDown = false;\r\n    }\r\n    public click(e: any) {\r\n        // these next four lines shouldn't be needed once mousedown and mouseup are working\r\n        // but they're not for some reason\r\n        this.mouseDownPos.x = e.pageX;\r\n        this.mouseDownPos.y = e.pageY;\r\n        this.mouseUpPos.x = e.pageX;\r\n        this.mouseUpPos.y = e.pageY;\r\n        this.mouseClicked = true;\r\n    }\r\n}\r\n\r\nclass SSAnimation {\r\n    public static: boolean;\r\n    public frameSize: Vector2;\r\n    public offset: Vector2;\r\n    public image: HTMLImageElement;\r\n    public sheetWidth: number;\r\n\tpublic name: string;\r\n\t// For automatic anims\r\n\tpublic frameCounter: number = 0;\r\n\tpublic frameCounterMax: number;\r\n\r\n    public translate(ofst: Vector2) {\r\n        this.offset = ofst;\r\n    }\r\n\r\n\t// Frames must be greater than 0 for animations\r\n    constructor(st: boolean, width: number, height: number, off_x: number, off_y: number, frames: number, name: string) {\r\n        this.static = st;\r\n        this.frameSize = new Vector2(width, height);\r\n        this.offset = new Vector2(off_x, off_y);\r\n\t\tthis.frameCounterMax = frames;\r\n\t\tthis.name = name;\r\n    }\r\n    public setImage(img) {\r\n        this.image = img;\r\n        this.sheetWidth = Math.floor(img.width / this.frameSize.x);\r\n    }\r\n}\r\n\r\nclass Obj {\r\n    bStatic: boolean;\r\n    pos: Vector2;\r\n    gPos: Vector2;\r\n\tanimMan: AnimationManager;\r\n    zIndex: number = 5;\r\n\r\n    public setZ(z): void {\r\n        this.zIndex = z;\r\n    }\r\n    constructor(x: number, y: number, anims: Array<SSAnimation>, z?: number) {\r\n        this.pos = new Vector2(x, y);\r\n        this.zIndex = 0;\r\n\t\tthis.animMan = new AnimationManager(anims);\r\n\t\tif (typeof (z) !== \"undefined\")\r\n\t\t\tthis.zIndex = z;\r\n    }\r\n}\r\n\r\nclass CollisionTile extends Obj {\r\n    bStatic = true;\r\n    constructor(x: number, y: number, anims: Array<SSAnimation>) {\r\n        super(x, y, anims);\r\n        this.zIndex = 3;\r\n    }\r\n}\r\n\r\nclass FloorTile extends Obj {\r\n    bStatic = true;\r\n    public tick() {\r\n        this.pos.x++;\r\n    }\r\n    constructor(x: number, y: number, anims: Array<SSAnimation>) {\r\n        super(x, y, anims);\r\n        this.zIndex = 0;\r\n    }\r\n}\r\n\r\nclass WallTile extends Obj {\r\n    bStatic = true;\r\n    constructor(x: number, y: number, anims: Array<SSAnimation>) {\r\n        super(x, y, anims);\r\n        this.zIndex = 5;\r\n    }\r\n}\r\n\r\nclass DoorTile extends Obj {\r\n    bStatic = true;\r\n    constructor(x: number, y: number, anims: Array<SSAnimation>) {\r\n        super(x, y, anims);\r\n        this.zIndex = 5;\r\n    }\r\n}\r\n\r\nfunction gridToScreen(xOrVect: any, y?: number): Vector2 {\r\n    var out;\r\n    \r\n    if (typeof xOrVect != \"number\")\r\n        out = new Vector2((600 + 32 * xOrVect.x - 32 * xOrVect.y) - 87, (16 * xOrVect.x + 16 * xOrVect.y) + 44);\r\n    else \r\n        out = new Vector2((600 + 32 * xOrVect - 32 * (y || 0)) - 87, (16 * xOrVect + 16 * (y || 0)) + 44);\r\n\r\n    return out;\r\n}\r\n\r\nfunction div(a: number, b: number): number {\r\n    return (~~(a / b)) * b;\r\n}\r\n\r\n//function screenToGrid(x: number, y: number) {\r\n//\tvar xg = Math.round((((x / 32) - 18.75 + (y / 16)) / 2) - 2.72);\r\n//\txg = x - 513 \r\n//\tvar y = Math.round(((18.75 + (y / 16) - (x / 32)) / 2)) - 2.75);\r\n//    var out = new Vector2(xg, yg);\r\n//    return out;\r\n//}\r\n\r\nfunction lerp(start: Vector2, end: Vector2, speed: number) {\r\n    var dx = end.x - start.x;\r\n    var dy = end.y - start.y;\r\n    var len = Math.sqrt(dx * dx + dy * dy);\r\n    if (speed >= len) {\r\n        return new Vector2(end.x, end.y);\r\n    } else {\r\n        dx *= speed / len;\r\n        dy *= speed / len;\r\n        return new Vector2(start.x + dx, start.y + dy);\r\n    }\r\n}\r\n\r\nenum Direction { DL, UL, UR, DR };\r\nenum RTypes { FLOOR, WALL, DOOR };\r\n\r\nclass AssetManager {\r\n    // Loading Bar Vars\r\n    private barTickSize: number = 0;\r\n    private totalBar: number = 0;\r\n    public total: number = 0;\r\n    private remainder: number = 0;\r\n    private curr: number = 0;\r\n    private imagesLength: number;\r\n\tprivate doneLoading: boolean = false;\r\n\r\n    // Arrays of anims, images, and audio\r\n    public images: { [index: string]: HTMLImageElement; } = {};\r\n    private imageURLs: { [index: string]: string; } = {\r\n        none: \"images/none.png\",\r\n        floor: \"images/floors.png\",\r\n        wall: \"images/walls.png\",\r\n        teleporter: \"images/teleporter.png\",\r\n        playerIdleR: \"images/charStatDown.png\",\r\n        playerIdleD: \"images/charStatLeft.png\",\r\n        playerIdleU: \"images/charStatUp.png\",\r\n        playerWalkR: \"images/charStatDown.png\",\r\n        playerWalkD: \"images/charStatLeft.png\",\r\n        playerWalkU: \"images/charStatUp.png\",\r\n        filled: \"images/filled.png\",\r\n        empty: \"images/empty.png\",\r\n        npcFollow: \"images/npcFollower.png\",\r\n\t\tnpcFollowAnim: \"images/npcFollower.png\",\r\n\t\tnpcAll: \"images/npcAll.png\",\r\n        npcIdleDSeen: \"images/npcStatDown.png\",\r\n        npcIdleLSeen: \"images/npcStatLeft.png\",\r\n        npcIdleUSeen: \"images/npcStatUp.png\",\r\n        npcIdleRSeen: \"images/npcStatRight.png\",\r\n\t\tarrowDownLeft: \"images/arrows/arrow-downleft.png\",\r\n\t\tarrowDownLeftPress: \"images/arrows/arrow-downleft-press.png\",\r\n\t\tarrowDownLeftNo: \"images/arrows/arrow-downleft-press1.png\",\r\n\t\tarrowDownRight: \"images/arrows/arrow-downright.png\",\r\n\t\tarrowDownRightPress: \"images/arrows/arrow-downright-press.png\",\r\n\t\tarrowDownRightNo: \"images/arrows/arrow-downright-press1.png\",\r\n\t\tarrowUpLeft: \"images/arrows/arrow-upleft.png\",\r\n\t\tarrowUpLeftPress: \"images/arrows/arrow-upleft-press.png\",\r\n\t\tarrowUpLeftNo: \"images/arrows/arrow-upleft-press1.png\",\r\n\t\tarrowUpRight: \"images/arrows/arrow-upright.png\",\r\n\t\tarrowUpRightPress: \"images/arrows/arrow-upright-press.png\",\r\n        arrowUpRightNo: \"images/arrows/arrow-upright-press1.png\",\r\n        gameOver: \"images/gameover.png\",\r\n        tapToRestart: \"images/taptorestart.png\",\r\n    };\r\n    public anims: { [index: string]: SSAnimation; } = { //index matches imageURL index\r\n        none: new SSAnimation(true, 64, 32, 32, 16, 0, \"none\"),\r\n        floor: new SSAnimation(true, 64, 32, 32, 16, 0, \"floor\"),\r\n        wall: new SSAnimation(true, 64, 64, 32, 48, 0, \"wall\"),\r\n        teleporter: new SSAnimation(true, 64, 48, 32, 32, 0, \"teleporter\"),\r\n        playerIdleR: new SSAnimation(true, 64, 64, 32, 44, 0, \"playerIdleR\"),\r\n        playerIdleD: new SSAnimation(true, 64, 64, 32, 44, 0, \"playerIdleD\"),\r\n        playerIdleU: new SSAnimation(true, 64, 64, 32, 44, 0, \"playerIdleU\"),\r\n        playerWalkR: new SSAnimation(true, 64, 64, 32, 64, 0, \"playerWalkR\"),\r\n        playerWalkD: new SSAnimation(true, 64, 64, 32, 64, 0, \"playerWalkD\"),\r\n        playerWalkU: new SSAnimation(true, 64, 64, 32, 64, 0, \"playerWalkU\"),\r\n        filled: new SSAnimation(true, 64, 32, 32, 16, 0, \"filled\"),\r\n        empty: new SSAnimation(true, 64, 32, 32, 16, 0, \"empty\"),\r\n        npcFollow: new SSAnimation(true, 64, 64, 32, 40, 0, \"npcFollow\"),\r\n\t\tnpcFollowAnim: new SSAnimation(false, 64, 64, 32, 40, 0, \"npcFollowAnim\"),\r\n\t\tnpcAll: new SSAnimation(false, 64, 64, 32, 40, -1, \"npcAll\"),\r\n        npcIdleDSeen: new SSAnimation(true, 64, 64, 32, 60, 0, \"npcIdleDSeen\"),\r\n        npcIdleLSeen: new SSAnimation(true, 64, 64, 32, 60, 0, \"npcIdleLSeen\"),\r\n        npcIdleUSeen: new SSAnimation(true, 64, 64, 32, 60, 0, \"npcIdleUSeen\"),\r\n        npcIdleRSeen: new SSAnimation(true, 64, 64, 32, 60, 0, \"npcIdleRSeen\"),\r\n\t\tarrowDownLeft: new SSAnimation(true, 91, 77, 45, 38, 0, \"arrowDownLeft\"),\r\n        arrowDownLeftPress: new SSAnimation(true, 91, 77, 45, 38, 0, \"arrowDownLeftPress\"),\r\n        arrowDownLeftNo: new SSAnimation(true, 91, 77, 45, 38, 0, \"arrowDownLeftNo\"),\r\n        arrowDownRight: new SSAnimation(true, 91, 77, 45, 38, 0, \"arrowDownRight\"),\r\n        arrowDownRightPress: new SSAnimation(true, 91, 77, 45, 38, 0, \"arrowDownRightPress\"),\r\n        arrowDownRightNo: new SSAnimation(true, 91, 77, 45, 38, 0, \"arrowDownRightNo\"),\r\n        arrowUpLeft: new SSAnimation(true, 91, 76, 45, 38, 0, \"arrowUpLeft\"),\r\n        arrowUpLeftPress: new SSAnimation(true, 91, 76, 45, 38, 0, \"arrowUpLeftPress\"),\r\n        arrowUpLeftNo: new SSAnimation(true, 91, 76, 45, 38, 0, \"arrowUpLeftNo\"),\r\n        arrowUpRight: new SSAnimation(true, 91, 76, 45, 38, 0, \"arrowUpRight\"),\r\n        arrowUpRightPress: new SSAnimation(true, 91, 76, 45, 38, 0, \"arrowUpRightPress\"),\r\n        arrowUpRightNo: new SSAnimation(true, 91, 76, 45, 38, 0, \"arrowUpRightNo\"),\r\n        gameOver: new SSAnimation(true, 420, 40, 0, 0, 0, \"gameOver\"),\r\n        tapToRestart: new SSAnimation(true, 486, 60, 0, 0, 0, \"tapToRestart\"),\r\n    };\r\n    public audio: any = {}; // Can't do : Array<HTMLAudioElement> because that doesn't support .addEventListenerxr some odd reason\r\n    private audioURLs: any = {\r\n        \"main\": \"sounds/theme2.wav\",\r\n        \"seen\": \"sounds/spotted.wav\",\r\n    };\r\n\r\n    // Loading bar canvas vars;\r\n    private x: number = 0;\r\n    private y: number = 0;\r\n    private height: number = 0;\r\n\r\n    // Updates the loading bar when asset is loaded\r\n    updateBar(ctx: CanvasRenderingContext2D, canvas: HTMLCanvasElement) {\r\n        this.curr++;\r\n\t\tvar that = this;\r\n\r\n        // Loading bar\r\n        this.totalBar += this.barTickSize;\r\n        ctx.fillStyle = \"black\";\r\n        var width: number = Math.floor(this.totalBar);\r\n        if (this.curr >= this.total) width += this.remainder;\r\n        ctx.fillRect(this.x, this.y, width, this.height);\r\n\r\n        // Custom event handled in game.ts to start the game when all assets have loaded\r\n        $(\"body\").trigger(\"assetLoaded\", {\r\n\t\t\t\"num\": this.curr\r\n\t\t});\r\n\t\t$(\"body\").on(\"assetLoaded\", function (e, d) {\r\n\t\t\tif (d.num >= that.total && !that.doneLoading) {\r\n\t\t\t\tthat.doneLoading = true;\r\n\t\t\t\t// Assign image to anim\r\n\t\t\t\tfor (var j in that.anims)\r\n\t\t\t\t\tthat.anims[j].setImage(that.images[j]);\r\n\t\t\t\t$(\"body\").trigger(\"assetsFinished\");\r\n\t\t\t}\r\n\t\t});\r\n    }\r\n\r\n    private preloader(ctx: CanvasRenderingContext2D, canvas: HTMLCanvasElement): void {\r\n        var that = this;\r\n\r\n        // Preload all images and put into anims\r\n        for (var i in this.anims) {\r\n            this.images[i] = new Image();\r\n            this.images[i].onload = function (): void {\r\n                that.updateBar(ctx, canvas);\r\n            }\r\n            this.images[i].src = this.imageURLs[i];\r\n            this.imagesLength++;\r\n\r\n        }\r\n\r\n        // Preload all sounds\r\n        for (var i in this.audioURLs) {\r\n            this.audio[i] = new Audio();\r\n            this.audio[i].addEventListener('canplaythrough', that.updateBar(ctx, canvas), false);\r\n            this.audio[i].src = this.audioURLs[i];\r\n            this.audio[i].load();\r\n            if (this.audioURLs[i] !== \"sounds/spotted.wav\")\r\n                this.audio[i].addEventListener('ended', function () {\r\n                    this.currentTime = 0;\r\n                    this.play();\r\n                }, false);\r\n        }\r\n    }\r\n\r\n    public removeAssets() {\r\n        for (var i = this.audio.length - 1; i >= 0; i--)\r\n            $(this.audio[0]).remove();\r\n        for (var i = this.imagesLength - 1; i >= 0; i--)\r\n            $(this.images[0]).remove(); \r\n    }\r\n\r\n    constructor(ctx: CanvasRenderingContext2D, canvas: HTMLCanvasElement) {\r\n        this.imagesLength = 0;\r\n        // Set canvas vars\r\n        this.total = Object.keys(this.imageURLs).length + Object.keys(this.audioURLs).length;\r\n        this.x = Math.floor(canvas.width / 4);\r\n        this.y = Math.floor(canvas.height / 2 - canvas.height / 16);\r\n        this.height = Math.floor(canvas.height / 16);\r\n\r\n        // Black background\r\n        ctx.fillStyle = \"black\";\r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n        // Loading bar stuff\r\n        ctx.fillStyle = \"white\";\r\n        ctx.fillRect(this.x - 5, this.y - 5, Math.floor(canvas.width / 2 + 10), this.height + 10); // 5 is boarder\r\n        this.barTickSize = Math.floor((canvas.width / 2) / this.total);\r\n        this.remainder = Math.floor(canvas.width / 2) - (this.barTickSize * this.total);\r\n\r\n        // \"Loading...\"\r\n        ctx.fillStyle = \"white\";\r\n        ctx.font = \"2em Inconsolata\";\r\n        ctx.fillText(\"Loading...\", canvas.width / 2 - 72, canvas.height / 2 + 32);\r\n\r\n        // Actually load the images\r\n        this.preloader(ctx, canvas);\r\n    }\r\n}\r\n\r\nclass Renderer {\r\n    public canvas: HTMLCanvasElement;\r\n    public ctx: CanvasRenderingContext2D;\r\n\tprivate assets: AssetManager;\r\n\r\n    public draw(objs: Array<Obj>, anims: { [index: string]: SSAnimation; }, fps?: number) {\r\n        // draw background\r\n        this.ctx.fillStyle = \"black\";\r\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n        // render objects first by z-index, then by ascending (top to bottom) y order\r\n        objs.sort(function (a: Obj, b: Obj): number {\r\n            var zDiff = a.zIndex - b.zIndex;\r\n            if (zDiff == 0) {\r\n                var yDiff = a.pos.y - b.pos.y\r\n                if (yDiff == 0) {\r\n                    if (a instanceof Player) {\r\n                        return 1;\r\n                    } else if (b instanceof Player) {\r\n                        return -1;\r\n                    } else {\r\n                        return 0;\r\n                    }\r\n                } else {\r\n                    return yDiff;\r\n                }\r\n            } else {\r\n                return zDiff;\r\n            }\r\n        });\r\n\r\n        for (var i: number = 0; i < objs.length; i++) {\r\n            var obj: Obj = objs[i];\r\n            var anim: SSAnimation = obj.animMan.anims[obj.animMan.currentAnim];\r\n\r\n\t\t\t// For automatic anims only (so not npc's or the player or anything like that atm)\r\n            if (!anim.static && anim.frameCounterMax > 0 && anim.frameCounter == (anim.frameCounterMax - 1)) {\r\n                obj.animMan.rightFrame();\r\n                anim.frameCounter = (anim.frameCounter + 1) % anim.frameCounterMax;\r\n            }\r\n\r\n            // Draw everything on canvas\r\n            this.ctx.drawImage(anim.image,\r\n                obj.animMan.framePosition.x,\r\n                obj.animMan.framePosition.y,\r\n                anim.frameSize.x,\r\n                anim.frameSize.y,\r\n                obj.pos.x - anim.offset.x,\r\n                obj.pos.y - anim.offset.y, \r\n                anim.frameSize.x,\r\n                anim.frameSize.y);\r\n\r\n\t\t\t// FPS Counter\r\n\t\t\tif (typeof (fps) !== undefined && fps != -1) {\r\n\t\t\t\tthis.ctx.fillStyle = \"#DD1321\";\r\n\t\t\t\tthis.ctx.font = \"2em Inconsolata\";\r\n\t\t\t\tthis.ctx.fillText(\"fps: \" + JSON.stringify(fps), this.canvas.width / 14, this.canvas.height / 11);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    constructor() {\r\n        this.canvas = <HTMLCanvasElement> document.getElementById(\"canvas\");\r\n        this.canvas.width = 1024;\r\n        this.canvas.height = 600;\r\n        $(this.canvas).css({\"display\":\"block\",\"width\":\"1024\",\"height\":\"600\",\"margin-left\":\"auto\", \"margin-right\":\"auto\"});\r\n        this.ctx = this.canvas.getContext(\"2d\") as CanvasRenderingContext2D;\r\n    }\r\n}\r\n\r\nclass AnimationManager {\r\n\tpublic frame: number = 0;\r\n\tpublic framePosition: Vector2;\r\n\tpublic anims: Array<SSAnimation>;\r\n\tpublic currentAnim: number;\r\n\r\n\tpublic nextAnim() {\r\n\t\tthis.frame = 0;\r\n\t\tthis.currentAnim = (this.currentAnim + 1) % this.anims.length;\r\n\t}\r\n\r\n\tpublic gotoNamedAnim(name: string) {\r\n\t\tfor (var x: number = 0; x < this.anims.length; x++) {\r\n\t\t\tif (name == this.anims[x].name) {\r\n\t\t\t\tthis.currentAnim = x;\r\n\t\t\t\tthis.frame = 0;\r\n\t\t\t\tthis.framePosition.x = this.frame * this.anims[this.currentAnim].frameSize.x;\r\n\t\t\t\tthis.framePosition.y = Math.floor(this.frame / this.anims[this.currentAnim].sheetWidth);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic gotoAnim(num: number) {\r\n\t\tif (num >= 0 && num < this.anims.length) {\r\n\t\t\tthis.frame = 0;\r\n\t\t\tthis.currentAnim = num;\r\n\t\t\tthis.framePosition.x = this.frame * this.anims[this.currentAnim].frameSize.x;\r\n\t\t\tthis.framePosition.y = Math.floor(this.frame / this.anims[this.currentAnim].sheetWidth);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic rightFrame() {\r\n\t\tif (!this.anims[this.currentAnim].static) {\r\n\t\t\tthis.frame = (this.frame + 1) % this.anims[this.currentAnim].sheetWidth;\r\n\t\t\tthis.framePosition.x = this.frame * this.anims[this.currentAnim].frameSize.x;\r\n\t\t\tthis.framePosition.y = Math.floor(this.frame / this.anims[this.currentAnim].sheetWidth);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic leftFrame() {\r\n\t\tif (!this.anims[this.currentAnim].static) {\r\n\t\t\tthis.frame = (this.frame + 3) % this.anims[this.currentAnim].sheetWidth;\r\n\t\t\tthis.framePosition.x = this.frame * this.anims[this.currentAnim].frameSize.x;\r\n\t\t\tthis.framePosition.y = Math.floor(this.frame / this.anims[this.currentAnim].sheetWidth);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic gotoFrame(frame: number) {\r\n\t\tif (frame > 0 && frame < this.anims[this.currentAnim].sheetWidth && !this.anims[this.currentAnim].static) {\r\n\t\t\tthis.frame = frame;\r\n\t\t\tthis.framePosition.x = this.frame * this.anims[this.currentAnim].frameSize.x;\r\n\t\t\tthis.framePosition.y = Math.floor(this.frame / this.anims[this.currentAnim].sheetWidth);\r\n\t\t}\r\n\t}\r\n\r\n\tconstructor(anims: Array<SSAnimation>, currentAnim?: number) {\r\n\t\tthis.anims = anims;\r\n\t\tthis.currentAnim = (typeof (currentAnim) !== \"undefined\") ? currentAnim : 0;\r\n\t\tthis.framePosition = new Vector2(0, 0);\r\n\t}\r\n}\r\n\r\n// Basic tile for each grid point on a floor\r\nclass GridTile {\r\n    wall: boolean;\r\n    door: boolean;\r\n    type: RTypes;\r\n    constructor() {\r\n        this.wall = false;\r\n        this.door = false;\r\n        this.type = RTypes.FLOOR;\r\n    }\r\n}\r\n\r\n// Floors in a building, contains a 2d array of GridTiles called grid\r\nclass Floor {\r\n    public grid: Array<Array<GridTile>>;\r\n\r\n    private partition(x: number, y: number, dir: number, floorSize: number): void {\r\n        var length: number = 0;\r\n        var start: Vector2 = new Vector2(x, y);\r\n\r\n        // Return if coords are bad\r\n        if (x < 0 || x > floorSize || y < 0 || y > floorSize) {\r\n            console.warn(\"coords out of bounds\");\r\n            return;\r\n        }\r\n\r\n        // Return if too small\r\n        var minLength: number = 3;\r\n        var percent: number = 2;\r\n        if (dir == 0) {\r\n            for (var i: number = 0; i < minLength; i++)\r\n                if (this.grid[x][y + i].wall) return;\r\n            if (this.grid[x + 1][y + 1].wall || (this.grid[x + 2][y + 1].wall && (Math.random() * 10) > percent) || this.grid[x - 1][y + 1].wall || (this.grid[x - 2][y + 1].wall && (Math.random() * 10) > percent)) return;\r\n        }\r\n        else if (dir == 1) {\r\n            for (var i: number = 0; i < minLength; i++)\r\n                if (this.grid[x + i][y].wall) return;\r\n            if (this.grid[x + 1][y + 1].wall || (this.grid[x + 1][y + 2].wall && (Math.random() * 10) > percent) || this.grid[x + 1][y - 1].wall || (this.grid[x + 1][y - 2].wall && (Math.random() * 10) > percent)) return;\r\n        }\r\n        else if (dir == 2) {\r\n            for (var i: number = 0; i < minLength; i++)\r\n                if (this.grid[x][y - i].wall) return;\r\n            if (this.grid[x + 1][y - 1].wall || (this.grid[x + 2][y - 1].wall && (Math.random() * 10) > percent) || this.grid[x - 1][y - 1].wall || (this.grid[x - 2][y - 1].wall && (Math.random() * 10) > percent)) return;\r\n        }\r\n        else if (dir == 3) {\r\n            for (var i: number = 0; i < minLength; i++)\r\n                if (this.grid[x - i][y].wall) return;\r\n            if (this.grid[x - 1][y + 1].wall || (this.grid[x - 1][y + 2].wall && (Math.random() * 10) > percent) || this.grid[x - 1][y - 1].wall || (this.grid[x - 1][y - 2].wall && (Math.random() * 10) > percent)) return;\r\n        }\r\n\r\n        // Make a wall until you hit another wall in the specified direction \r\n        while (!this.grid[x][y].wall) {\r\n            this.grid[x][y].wall = !this.grid[x][y].wall;\r\n            this.grid[x][y].type = RTypes.WALL;\r\n\r\n            if (dir == 0) y++;\r\n            else if (dir == 1) x++;\r\n            else if (dir == 2) y--;\r\n            else if (dir == 3) x--;\r\n\r\n            length++;\r\n        }\r\n        length--; // All of the stuff runs the last time when it's on another wall\r\n\r\n        // To move the door if a wall runs into a door (not for spawning from a door)\r\n        if (dir == 0 && (y + 1 < floorSize) && this.grid[x][y].door) {\r\n            this.grid[x][y].door = false;\r\n            this.grid[x][y].type = RTypes.WALL;\r\n            if (this.grid[x + 1][y + 1].wall) {\r\n                this.grid[x - 1][y].door = true;\r\n                this.grid[x - 1][y].type = RTypes.DOOR;\r\n            }\r\n            else {\r\n                this.grid[x + 1][y].door = true;\r\n                this.grid[x + 1][y].type = RTypes.DOOR;\r\n            }\r\n        } else if (dir == 1 && (x + 1 < floorSize) && this.grid[x][y].door) {\r\n            this.grid[x][y].door = false;\r\n            this.grid[x][y].type = RTypes.WALL;\r\n            if (this.grid[x + 1][y + 1].wall) {\r\n                this.grid[x][y - 1].door = true;\r\n                this.grid[x][y - 1].type = RTypes.DOOR;\r\n            }\r\n            else {\r\n                this.grid[x][y + 1].door = true;\r\n                this.grid[x][y + 1].type = RTypes.DOOR;\r\n            }\r\n        } else if (dir == 2 && (y - 1 > 0) && this.grid[x][y].door) {\r\n            this.grid[x][y].door = false;\r\n            this.grid[x][y].type = RTypes.WALL;\r\n            if (this.grid[x + 1][y - 1].wall) {\r\n                this.grid[x - 1][y].door = true;\r\n                this.grid[x - 1][y].type = RTypes.DOOR;\r\n            }\r\n            else {\r\n                this.grid[x + 1][y].door = true;\r\n                this.grid[x + 1][y].type = RTypes.DOOR;\r\n            }\r\n        } else if (dir == 3 && (x - 1 > 0) && this.grid[x][y].door) {\r\n            this.grid[x][y].door = false;\r\n            this.grid[x][y].type = RTypes.WALL;\r\n            if (this.grid[x - 1][y + 1].wall) {\r\n                this.grid[x][y - 1].door = true;\r\n                this.grid[x][y - 1].type = RTypes.DOOR;\r\n            }\r\n            else {\r\n                this.grid[x][y + 1].door = true;\r\n                this.grid[x][y + 1].type = RTypes.DOOR;\r\n            }\r\n        }\r\n\r\n        // Make a door in the middle-ish\r\n        var door1 = Math.floor((Math.random() * (length * (2 / 3))) + (length / 6));\r\n        var door2 = -1;\r\n\r\n        // If big enough, take split the wall in half and put the doors on opposite ends\r\n        if (length > floorSize / 2) {\r\n            door1 = Math.floor((Math.random() * ((length / 2) * (2 / 3))) + ((length / 2) / 6));\r\n            door2 = Math.floor((Math.random() * ((length / 2) * (2 / 3))) + ((length / 2) / 6) + (length / 2));\r\n        }\r\n\r\n        // Get new coords\r\n        var newCord1: number = door1;\r\n        var newCord2: number = door1;\r\n\r\n        while (newCord1 == door1 || newCord1 == door2) {\r\n            newCord1 = Math.floor((Math.random() * (length * (2 / 3))) + (length / 6));\r\n        }\r\n        while (newCord2 == door1 || newCord2 == door2) {\r\n            newCord2 = Math.floor((Math.random() * (length * (2 / 3))) + (length / 6));\r\n        }\r\n\r\n        // Fix values for directions \r\n        if (dir == 2 || dir == 3) {\r\n            newCord1 *= -1;\r\n            newCord2 *= -1;\r\n        }\r\n        if (dir == 2 || dir == 3) {\r\n            door1 *= -1;\r\n            door2 *= -1;\r\n        }\r\n\r\n        // Set door\r\n        if (dir == 0 || dir == 2) {\r\n            this.grid[x][start.y + door1].door = true;\r\n            this.grid[x][start.y + door1].type = RTypes.DOOR;\r\n            if (length > (floorSize * .75)) {\r\n                this.grid[x][start.y + door2].door = true;\r\n                this.grid[x][start.y + door2].type = RTypes.DOOR;\r\n            }\r\n            else if (length > (floorSize / 2) && ((Math.random() * 10) > 2.5)) {\r\n                this.grid[x][start.y + door2].door = true;\r\n                this.grid[x][start.y + door2].type = RTypes.DOOR;\r\n            }\r\n        }\r\n        else if (dir == 1 || dir == 3) {\r\n            this.grid[start.x + door1][y].door = true;\r\n            this.grid[start.x + door1][y].type = RTypes.DOOR;\r\n            if (length > (floorSize * .75)) {\r\n                this.grid[start.x + door2][y].door = true;\r\n                this.grid[start.x + door2][y].type = RTypes.DOOR;\r\n            }\r\n            else if (length > (floorSize / 2) && ((Math.random() * 10) > 2.5)) {\r\n                this.grid[start.x + door2][y].door = true;\r\n                this.grid[start.x + door2][y].type = RTypes.DOOR;\r\n            }\r\n        }\r\n\r\n        // Do the recursion\r\n        // Recursive x\r\n        if (dir == 0 || dir == 2) {\r\n            // Recurse right\r\n            this.partition(x + 1, start.y + newCord1, 1, floorSize);\r\n            // Recurse left\r\n            this.partition(x - 1, start.y + newCord2, 3, floorSize);\r\n        }\r\n        // Recursive y\r\n        else if (dir == 1 || dir == 3) {\r\n            // Recurse up\r\n            this.partition(start.x + newCord1, y + 1, 0, floorSize);\r\n            // Recurse down\r\n            this.partition(start.x + newCord2, y - 1, 2, floorSize);\r\n        }\r\n    }\r\n\r\n    constructor(floorSize: number) {\r\n        this.grid = [];\r\n        \r\n        for (var j: number = 0; j <= floorSize; j++) {\r\n            this.grid[j] = [];\r\n            for (var k: number = 0; k <= floorSize; k++) {\r\n                this.grid[j][k] = new GridTile();\r\n                this.grid[j][k].wall = (j == 0 || j == floorSize) ? true : (k == 0 || k == floorSize) ? true : false;\r\n                this.grid[j][k].type = (j == 0 || j == floorSize) ? RTypes.WALL : (k == 0 || k == floorSize) ? RTypes.WALL : RTypes.FLOOR;\r\n            }\r\n        }\r\n\r\n        var dir = Math.round(Math.random());\r\n        var x: number = (dir == 0) ? Math.floor(Math.random() * (((floorSize - 1) / 2) + 1) + (floorSize / 4)) : 1;\r\n        var y: number = (dir == 1) ? Math.floor(Math.random() * (((floorSize - 1) / 2) + 1) + (floorSize / 4)) : 1;\r\n        this.partition(x, y, dir, floorSize);\r\n    }\r\n}\r\n\r\n// Top level object, post: building complete with floors and rooms\r\nclass Building {\r\n    floors: Array<Floor>;\r\n    numFloors: number;\r\n    collisionMap: Array<Array<Array<CollisionTile>>>;\r\n\r\n    constructor(floorSize: number, assets: AssetManager) {\r\n        this.floors = [];\r\n        this.numFloors = (Math.floor(Math.random() * 8)) + 10; // Anywhere from 10-18 floors\r\n\r\n        for (var i: number = 0; i < this.numFloors; i++) {\r\n            this.floors[i] = new Floor(floorSize);\r\n        }\r\n\r\n        var tempArr = [];\r\n        var tempCollish: CollisionTile[] = [];\r\n        this.collisionMap = [];\r\n        for (var i = 0; i < this.numFloors; i++) {\r\n            this.collisionMap[i] = [];\r\n            for (var x = 0; x < this.floors[i].grid.length; x++) {\r\n                for (var y = 0; y < this.floors[i].grid.length; y++) {\r\n                    tempCollish.push((this.floors[i].grid[y][x].type == RTypes.WALL) ? new CollisionTile(gridToScreen(y, x).x, gridToScreen(y, x).y, [assets.anims[\"filled\"]]) : new CollisionTile(gridToScreen(y, x).x, gridToScreen(y, x).y, [assets.anims[\"empty\"]]));\r\n                }\r\n                this.collisionMap[i].push(tempCollish);\r\n                tempCollish = [];\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n}"],"sourceRoot":"SS/SS/js"}